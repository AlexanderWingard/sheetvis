<!doctype HTML>
<html>
<head>
<style>
h1 {
    text-align: center;
}
body {
    padding: 1em;
    max-width: 800px;
    margin: auto;
}

textarea {
    width: 100%;
    height: 5em;
    margin-bottom: 1em;
}
button {
    font-size: 1.3em;
}
#go {
    text-align: center;
}
table {
    border-collapse: collapse;
    border: 1px solid black;
    width: 100%;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}
td, th {
    border: 1px solid black;
    text-align: right;
}
</style>
</head>
<body>
<h1>Get started:</h1>
<h2>Step 1. Create spreadsheet</h2>
<div id="instructions">
  Create a new spreadsheet in <a href="http://drive.google.com">Google Drive</a><br/>
  Here is an example of how it could look:
  <table>
    <tr><th>Date</th><th>kH</th><th>Ca</th><th>Mg</th></tr>
    <tr><td>01/1/2014 19:00:00</td><td>7.7</td><td>425</td><td>1350</td></tr>
    <tr><td>07/1/2014 19:00:00</td><td>8.0</td><td>410</td><td>1320</td></tr>
  </table>

</div>
<h2>Step 2. Share the sheet</h2>
Press the blue share button and make sure to set <b>Anyone with the link can view</b>
<p><small><i>Make sure the spreadsheet is using the new drive API by ensuring that the link looks something like:
https://docs.google.com/spreadsheets/<b>d</b>/...</i></small></p>
<h2>Step 3. Visualize</h2>
<div id="go">
Paste your share link here:
<textarea id="doclink" wrap="soft">https://docs.google.com/spreadsheets/d/1EDLDCwq5uajVAlwtNZROxDReLCS0_tjAj5WVqByFMmw/edit?usp=sharing</textarea>
<button onclick="go()">Go</button>
</div>
<h1>Development:</h1>
<ul>
  <li>Drop rows with only a timestamp</li>
  <li>Make scale for series with all the same number</li>
  <li>Add labels for graphs</li>
  <li>Add date axis</li>
  <li>Make axis ticks responsive</li>
  <li>Sort graph order by value range</li>
  <li>Add support for text columns</li>
  <li>Add quick link to Drive document</li>
  <li>Rewrite ugly date column find</li>
  <li>Find a better way around Google Drive CORS restriction</li>
  <li>Add support for Dropbox</li>
  <li><s>Add support for any number of columns</s></li>
  <li><s>Adapt to new Google Drive API</s></li>
</ul>
</body>
<script>
function go() {
    var input = document.getElementById("doclink")
    var url = input.value

    var regex = /https:\/\/docs.google.com\/spreadsheets\/d\/(\S+)\//i
    var match = url.match(regex)
    if(match != null) {
        window.location.href = "view.html#" + match[1]
    } else {
        alert("Invalid google drive URL")
    }
}
</script>
</html>
